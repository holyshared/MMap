<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>MMap(Moogle Map) 0.2 - MMap.MarkerManager</title>
		<meta name="description" content="MMap(Moogle Map) 0.2 - MMap.MarkerManager" />
		<meta name="keywords" content="Mootools,javascript,Marker.MarkerManager,Google Maps" />
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Vollkorn:regular,italic,bold&amp;subset=latin" type="text/css" />
		<link rel="stylesheet" href="css/all.css" type="text/css" media="screen" />
		<link rel="stylesheet" href="css/plugins/views/views.css" type="text/css" media="screen" />
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false"></script>
		<script type="text/javascript" src="js/lib/mootools-core.js"></script>
		<script type="text/javascript" src="js/lib/mootools-more.js"></script>
		<script type="text/javascript" src="js/lib/mmap-compressed.js"></script>
		<script type="text/javascript" src="js/lib/sh/shCore.js"></script>
		<script type="text/javascript" src="js/lib/sh/shBrushJScript.js"></script>
		<script type="text/javascript" src="js/lib/sh/shBrushCss.js"></script>
		<script type="text/javascript" src="js/lib/sh/shBrushXml.js"></script>
		<script type="text/javascript" src="js/marker-manager/current.marker.view.js"></script>
		<script type="text/javascript" src="js/marker-manager/marker.manager.js"></script>
	</head>
	<body>
		<div class="page gs960">
			<div class="head hgGroup">
				<h1>MMap(Moogle Map) 0.2</h1>
				<h2>The marker displayed in the map is managed.</h2>
			</div>
			<!--/head-->

			<div class="body">
				<div class="leftCol gCal">

					<div class="mod nav">
						<div class="inner">
							<div class="hd">
								<h3>Contents</h3>
							</div>
							<div class="bd">

								<h4>English</h4>
								<ul class="menu">
									<li><a title="MMap.Marker" href="marker.html">MMap.Marker</a></li>
									<li><a title="MMap.Marker.Image" href="marker.image.html">MMap.Marker.Image</a></li>
									<li><a title="MMap.Marker.Images" href="marker.images.html">MMap.Marker.Images</a></li>
									<li><strong class="current">MMap.MarkerManager</strong></li>
									<li><a title="MMap.MarkerLoader" href="marker.loader.html">MMap.MarkerLoader</a></li>
									<li><a title="MMap.Window" href="window.html">MMap.Window</a></li>
									<li><a title="Mini Application" href="mini.application.html">Mini Application</a></li>
								</ul>

								<h4>Japanese</h4>
								<ul class="menu">
									<li><a title="MMap.Marker" href="ja/marker.html">MMap.Marker</a></li>
									<li><a title="MMap.Marker.Image" href="ja/marker.image.html">MMap.Marker.Image</a></li>
									<li><a title="MMap.Marker.Images" href="ja/marker.images.html">MMap.Marker.Images</a></li>
									<li><a title="MMap.MarkerManager" href="ja/marker.manager.html">MMap.MarkerManager</a></li>
									<li><a title="MMap.MarkerLoader" href="ja/marker.loader.html">MMap.MarkerLoader</a></li>
									<li><a title="MMap.Window" href="ja/window.html">MMap.Window</a></li>
								</ul>

							</div>
						</div>
					</div>

				</div>
				<!--/leftCol-->
				<div class="main">

					<div class="mod map">
						<div class="inner">
							<div class="hd">
								<h3>Two or more markers are managed.</h3>
								<p>Two or more markers are managed by using the marker manager.</p>
							</div>
							<div class="bd">
								<div id="gmap" class="googleMap"></div>
							</div>
						</div>
					</div>

					<div class="mod code">
						<div class="inner">
							<div class="hd">
								<h3>Example code</h3>
								<p>Source code of this demonstration</p>
							</div>
							<div class="bd">

								<div class="mod modulecode">
									<div class="inner">
										<div class="hd">
											<h4>Main code</h4>
										</div>
										<div class="bd">

<pre class="brush: js;">
(function($){

window.addEvent("domready", function(){

	var mapDiv = $('gmap');
	var map = new google.maps.Map(mapDiv, {
		disableDefaultUI: true,
		zoom: 15,
		center: new google.maps.LatLng(35.6666870, 139.731859),
		mapTypeId: google.maps.MapTypeId.ROADMAP
	});

	//The marker is made based on the parameter of the marker.
	var markers = [{
		title: 'MMap.Marker',
		image: 'http://holyshared.github.com/MMap/Demos/images/demo/img01.jpg',
		url: 'http://holyshared.github.com/MMap/Demos/marker.html',
		position: new google.maps.LatLng(35.6666870, 139.731859)
	}, {
		title: 'MMap.Marker.Image',
		image: 'http://holyshared.github.com/MMap/Demos/images/demo/img02.jpg',
		url: 'http://holyshared.github.com/MMap/Demos/marker.image.html',
		position: new google.maps.LatLng(35.6666870, 139.733859)
	}, {
		title: 'MMap.Marker.Images',
		image: 'http://holyshared.github.com/MMap/Demos/images/demo/img03.jpg',
		url: 'http://holyshared.github.com/MMap/Demos/marker.images.html',
		position: new google.maps.LatLng(35.6650870, 139.729859)
	}, {
		title: 'MMap.Window',
		image: 'http://holyshared.github.com/MMap/Demos/images/demo/img04.jpg',
		url: 'http://holyshared.github.com/MMap/Demos/window.html',
		position: new google.maps.LatLng(35.6686870, 139.728859)
	},	{
		title: 'MMap.MarkerLoader',
		image: 'http://holyshared.github.com/MMap/Demos/images/demo/img05.jpg',
		url: 'http://holyshared.github.com/MMap/Demos/marker.loader.html',
		visible: false,
		position: new google.maps.LatLng(35.6646870, 139.726859)
	}];

	var view = new CurrentMarkerView();
	map.controls[google.maps.ControlPosition.TOP_RIGHT].push(view.getInstance());

	var onClick = function(event){
		event.preventDefault();
		markerManager.active(this);
	}

	var onActive = function(event){
		view.set('title', this.getTitle());
		view.set('url', this.getURL());
	}

	var manageMarkers = [];
	markers.each(function(context){
		//markerClick
		var options = Object.merge(context, {
			onClick: onClick,
			onActive: onActive
		});
		var imageMarker = new MMap.Marker.Image(options);
		manageMarkers.push(imageMarker);
	});

	//The marker manager is made, and the managed marker is set.
	var markerManager = new MMap.MarkerManager({
		markers: manageMarkers
	});
	markerManager.setMap(map); //The arranged map is specified for all managed markers.
	markerManager.visible();
	markerManager.active(manageMarkers.getLast());
});

}(document.id));</pre>
										</div>
									</div>
								</div>

								<div class="mod modulecode">
									<div class="inner">
										<div class="hd">
											<h4>View code</h4>
										</div>
										<div class="bd">
<pre class="brush: js;">
(function($){

var CurrentMarkerView = this.CurrentMarkerView = new Class({

	Extends: MMap.MVCObject,

	Implements: [MMap.Events],

	initialize: function(){
		this._setup();
	},

	_setup: function(){
		var self = this;
		var title = new Element('h3', {'html': 'Information'});
		this._container = new Element('div', {'class': 'currentMarkerView'});
		title.inject(this._container);

		this._options = new Element('dl', {'class': 'states'});

		var label = new Element('dt', {'html': 'Title:'});
		var title = new Element('dd');
		this._options.adopt([label, title]);
		this._title = title;

		var label = new Element('dt', {'html': 'Url: '});
		var url = new Element('dd');
		var link = new Element('a');
		link.inject(url);

		this._options.adopt([label, url]);
		this._url = url;
		this._link = link;
		this._options.inject(this._container);
	},

	getInstance: function(){
		return this._container;
	},

	title_changed: function(){
		var title = this.get('title');
		this._title.set('html', title);
		this._link.set('title', title);
	},

	url_changed: function(){
		var url = this.get('url');
		this._link.set('html', url);
		this._link.set('href', url);
	}

});

}(document.id));
</pre>
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>


				</div>
				<!--/main-->
			</div>
			<!--/body-->

			<div class="foot">
				<p class="copyright">Copyright 2010 <a title="Noritaka Horio" href="http://sharedhat.com">Noritaka Horio</a> All rights reserved.</p>
			</div>
			<!--/foot-->
		</div>
		<!--/page-->
	</body>
</html>
